/*
  # Add Kuendigungsbestaetigung email template

  1. New Data
    - German email template for `kuendigungsbestaetigung` template key
    - Used when a landlord sends a termination confirmation to a tenant via the wizard
    - Variables: {{tenantName}}, {{landlordName}}, {{propertyAddress}}
  2. Important Notes
    - Follows existing template HTML structure and styling
    - Template is inserted only if it does not already exist
*/

INSERT INTO email_templates (template_key, language, subject, body_html, body_text)
SELECT
  'kuendigungsbestaetigung',
  'de',
  'Kündigungsbestätigung - {{propertyAddress}}',
  E'<!DOCTYPE html>\n<html xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office" lang="de">\n<head>\n<title></title>\n<meta http-equiv="Content-Type" content="text/html; charset=utf-8">\n<meta name="viewport" content="width=device-width, initial-scale=1.0"><!--[if mso]><xml><w:WordDocument xmlns:w="urn:schemas-microsoft-com:office:word"><w:DontUseAdvancedTypographyReadingMail/></w:WordDocument><o:OfficeDocumentSettings><o:PixelsPerInch>96</o:PixelsPerInch><o:AllowPNG/></o:OfficeDocumentSettings></xml><![endif]--><!--[if !mso]><!--><link href="https://fonts.googleapis.com/css2?family=Manrope:wght@100;200;300;400;500;600;700;800;900" rel="stylesheet" type="text/css"><!--<![endif]-->\n<style>* { box-sizing: border-box; } body { margin: 0; padding: 0; } a[x-apple-data-detectors] { color: inherit !important; text-decoration: inherit !important; } #MessageViewBody a { color: inherit; text-decoration: none; } p { line-height: inherit } .desktop_hide, .desktop_hide table { mso-hide: all; display: none; max-height: 0px; overflow: hidden; } .image_block img+div { display: none; } sup, sub { font-size: 75%; line-height: 0; } @media (max-width:620px) { .desktop_hide table.icons-inner, .row-1 .column-1 .block-5.button_block .alignment .button { display: inline-block !important; } .icons-inner { text-align: center; } .icons-inner td { margin: 0 auto; } .mobile_hide { display: none; } .row-content { width: 100% !important; } .stack .column { width: 100%; display: block; } .mobile_hide { min-height: 0; max-height: 0; max-width: 0; overflow: hidden; font-size: 0px; } .desktop_hide, .desktop_hide table { display: table !important; max-height: none !important; } .row-1 .column-1 .block-4.paragraph_block td.pad>div { text-align: left !important; font-size: 16px !important; } .row-1 .column-1 .block-2.divider_block td.pad, .row-1 .column-1 .block-4.paragraph_block td.pad, .row-1 .column-1 .block-5.button_block td.pad, .row-1 .column-1 .block-6.divider_block td.pad, .row-1 .column-1 .block-7.paragraph_block td.pad { padding: 10px !important; } .row-1 .column-1 .block-2.divider_block .alignment table, .row-1 .column-1 .block-6.divider_block .alignment table { display: inline-table; } .row-1 .column-1 .block-2.divider_block .alignment, .row-1 .column-1 .block-6.divider_block .alignment { text-align: center !important; font-size: 1px; } .row-1 .column-1 .block-3.heading_block h1, .row-1 .column-1 .block-5.button_block .alignment { text-align: center !important; } .row-1 .column-1 .block-7.paragraph_block td.pad>div { text-align: center !important; font-size: 16px !important; } .row-1 .column-1 .block-5.button_block span { font-size: 16px !important; line-height: 32px !important; } }</style><!--[if mso ]><style>sup, sub { font-size: 100% !important; } sup { mso-text-raise:10% } sub { mso-text-raise:-10% }</style> <![endif]-->\n</head>\n<body class="body" style="background-color: #ffffff; margin: 0; padding: 0; -webkit-text-size-adjust: none; text-size-adjust: none;">\n<table class="nl-container" width="100%" border="0" cellpadding="0" cellspacing="0" role="presentation" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt; background-color: #ffffff;">\n<tbody><tr><td>\n<table class="row row-1" align="center" width="100%" border="0" cellpadding="0" cellspacing="0" role="presentation" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt; background-color: #faf8f8;">\n<tbody><tr><td>\n<table class="row-content stack" align="center" border="0" cellpadding="0" cellspacing="0" role="presentation" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt; color: #000000; background-color: #faf8f8; width: 600px; margin: 0 auto;" width="600">\n<tbody><tr>\n<td class="column column-1" width="100%" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt; font-weight: 400; text-align: left; padding-bottom: 5px; padding-top: 5px; vertical-align: top;">\n<table class="image_block block-1" width="100%" border="0" cellpadding="0" cellspacing="0" role="presentation" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt;">\n<tr><td class="pad" style="width:100%;padding-right:0px;padding-left:0px;">\n<div class="alignment" align="center"><div style="max-width: 300px;"><a href="https://rentab.ly" target="_blank"><img src="https://6f36f82794.imgdist.com/pub/bfra/2bnm3c1v/dzm/8g5/nzj/rentably-logo.svg" style="display: block; height: auto; border: 0; width: 100%;" width="300" alt="rentably logo" title="rentably logo" height="auto"></a></div></div>\n</td></tr>\n</table>\n<table class="divider_block block-2" width="100%" border="0" cellpadding="10" cellspacing="0" role="presentation" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt;">\n<tr><td class="pad"><div class="alignment" align="center"><table border="0" cellpadding="0" cellspacing="0" role="presentation" width="100%" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt;"><tr><td class="divider_inner" style="font-size: 1px; line-height: 1px; border-top: 1px solid #dddddd;"><span style="word-break: break-word;">&#8202;</span></td></tr></table></div></td></tr>\n</table>\n<table class="heading_block block-3" width="100%" border="0" cellpadding="10" cellspacing="0" role="presentation" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt;">\n<tr><td class="pad"><h1 style="margin: 0; color: #3c8af7; direction: ltr; font-family: ''Manrope'', Arial, ''Helvetica Neue'', Helvetica, sans-serif; font-size: 20px; font-weight: 700; letter-spacing: normal; line-height: 2; text-align: left; margin-top: 0; margin-bottom: 0; mso-line-height-alt: 40px;"><span style="word-break: break-word;">Kündigungsbestätigung</span></h1></td></tr>\n</table>\n<table class="paragraph_block block-4" width="100%" border="0" cellpadding="10" cellspacing="0" role="presentation" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word;">\n<tr><td class="pad">\n<div style="color:#141719;direction:ltr;font-family:''Manrope'', Arial;font-size:14px;font-weight:400;letter-spacing:0px;line-height:1.6;text-align:left;mso-line-height-alt:22px;">\n<p style="margin: 0 0 16px 0;">Hallo <strong>{{tenantName}}</strong>,</p>\n<p style="margin: 0 0 16px 0;">anbei erhalten Sie die Kündigungsbestätigung für das Mietverhältnis in <strong>{{propertyAddress}}</strong>.</p>\n<p style="margin: 0 0 16px 0;">Das Dokument finden Sie als PDF-Anhang dieser E-Mail. Bitte bewahren Sie dieses Schreiben für Ihre Unterlagen auf.</p>\n<p style="margin: 0;">Bei Rückfragen stehen wir Ihnen gerne zur Verfügung.</p>\n</div>\n</td></tr>\n</table>\n<table class="paragraph_block block-5" width="100%" border="0" cellpadding="10" cellspacing="0" role="presentation" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word;">\n<tr><td class="pad">\n<div style="color:#141719;direction:ltr;font-family:''Manrope'', Arial;font-size:14px;font-weight:400;letter-spacing:0px;line-height:1.6;text-align:left;mso-line-height-alt:22px;">\n<p style="margin: 0;">Mit freundlichen Grüßen<br><strong>{{landlordName}}</strong></p>\n</div>\n</td></tr>\n</table>\n<table class="divider_block block-6" width="100%" border="0" cellpadding="10" cellspacing="0" role="presentation" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt;">\n<tr><td class="pad"><div class="alignment" align="center"><table border="0" cellpadding="0" cellspacing="0" role="presentation" width="100%" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt;"><tr><td class="divider_inner" style="font-size: 1px; line-height: 1px; border-top: 1px solid #dddddd;"><span style="word-break: break-word;">&#8202;</span></td></tr></table></div></td></tr>\n</table>\n<table class="paragraph_block block-7" width="100%" border="0" cellpadding="10" cellspacing="0" role="presentation" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word;">\n<tr><td class="pad">\n<div style="color:#141719;direction:ltr;font-family:''Manrope'', Arial;font-size:12px;font-weight:400;letter-spacing:0px;line-height:1.2;text-align:center;mso-line-height-alt:14px;">\n<p style="margin: 0; margin-bottom: 16px;">© 2026 <a href="https://rentab.ly/" style="text-decoration: underline; color: #141719;">rentab.ly</a></p>\n<p style="margin: 0;">Die moderne Lösung für professionelle Immobilienverwaltung</p>\n</div>\n</td></tr>\n</table>\n</td>\n</tr></tbody>\n</table>\n</td></tr></tbody>\n</table>\n</td></tr></tbody>\n</table>\n</body>\n</html>',
  'Hallo {{tenantName}},\n\nanbei erhalten Sie die Kündigungsbestätigung für das Mietverhältnis in {{propertyAddress}}.\n\nDas Dokument finden Sie als PDF-Anhang dieser E-Mail. Bitte bewahren Sie dieses Schreiben für Ihre Unterlagen auf.\n\nBei Rückfragen stehen wir Ihnen gerne zur Verfügung.\n\nMit freundlichen Grüßen\n{{landlordName}}\n\n---\n© 2026 rentab.ly - Die moderne Lösung für professionelle Immobilienverwaltung'
WHERE NOT EXISTS (
  SELECT 1 FROM email_templates WHERE template_key = 'kuendigungsbestaetigung' AND language = 'de'
);